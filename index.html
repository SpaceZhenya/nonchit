<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Умный генератор текста на русском</title>
<style>
  body { font-family: Arial; background: #f0f0f0; display: flex; flex-direction: column; align-items: center; padding: 50px; }
  textarea { width: 400px; height: 100px; padding: 10px; margin-bottom: 10px; }
  input, button { padding: 8px; margin-bottom: 10px; }
  #result { margin-top: 20px; width: 400px; min-height: 150px; background: white; padding: 10px; border-radius: 5px; white-space: pre-wrap; }
</style>
</head>
<body>

<h1>Умный генератор текста на русском</h1>
<textarea id="prompt" placeholder="Введите начало текста..."></textarea>
<br>
<label>Макс. длина слов: <input type="number" id="max_length" value="150"></label>
<br>
<label>Креативность (0.1–1.0): <input type="number" id="temperature" step="0.1" value="0.8"></label>
<br>
<button onclick="generateText()">Сгенерировать</button>

<div id="result">Результат появится здесь...</div>

<script>
async function generateText() {
  const prompt = document.getElementById('prompt').value;
  const maxLength = parseInt(document.getElementById('max_length').value);
  const temperature = parseFloat(document.getElementById('temperature').value);

  if (!prompt) return;

  const resultDiv = document.getElementById('result');
  resultDiv.innerText = "Генерируем...";

  try {
    const response = await fetch("http://localhost:8000/generate", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ text: prompt, max_length: maxLength, temperature: temperature })
    });
    const data = await response.json();
    resultDiv.innerText = data.generated_text;
  } catch (error) {
    console.error(error);
    resultDiv.innerText = "Ошибка при генерации текста.";
  }
}
</script>

</body>
</html>
